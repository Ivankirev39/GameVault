<template>
<div class="login-view">
    <h1>Login</h1>
    <form @submit.prevent="loginUser">
        <input type="email" v-model="email" placeholder="Email" required>
        <input type="password" v-model="password" placeholder="Passwords" required>
        <button type="submit" :disabled="loading"> Login </button>
    </form>
    <div class="error" v-if="authError">
        {{ authError }}

    </div>

    <div v-if="isLoggedIn">
        Logged in as: {{ currentUser?.email }}

    </div>

</div>
</template>

<script setup>
import { ref } from 'vue'
import { useAuth } from '../modules/useAuth'
const { login, authError, loading, isLoggedIn, currentUser } = useAuth()

const email = ref('')
const password = ref('')


const loginUser = () => {
    login(email.value, password.value)
}



</script>

<style>


.error {
color: brown;
margin-top: 10px;
}

</style>